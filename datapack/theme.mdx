# 对话框主题

基础架构如下：

```json
{
  "portrait": {},
  "option": {},
  "dialogBox": {},
  "functionalButton": {},
  "keyPrompt": {}
}
```

## 立绘

这里的立绘是预设的状态，将在写对话文本的时候调用立绘的标识符来使用。
立绘分为 3 种：
1. texture（图片）
2. player_head（玩家头像）
3. item（物品材质）

每种的参数都是不一样的。话不多说，上案例：

```json
{
  "portrait": {
    "pic": {
      "type": "texture",
      "value": "chatbox:textures/portrait/authors.png",
      "animation": "CUSTOM",
      "duration": 20,
      "easing": "EASE_IN_SINE",
      "x": 0,
      "y": 0,
      "width": 10,
      "height": 10,
      "alignX": "left",
      "alignY": "bottom",
      "opacity": 100,
      "scale": 1,
      "renderOrder": 20,
      "customAnimation": [
        {
          "texture": "",
          "time": 50,
          "x": 0,
          "y": 0,
          "scale": 1,
          "opacity": 100,
          "easing": "EASE_OUT_SINE"
        },
        {
          "texture": "",
          "time": 30,
          "x": 0,
          "y": 0,
          "scale": 1,
          "opacity": 100,
          "easing": "EASE_OUT_SINE"
        }
      ]
    },
    "player": {
      "type": "player_head",
      "value": "@s",
      "x": 0,
      "y": 0,
      "width": 10,
      "height": 10,
      "alignX": "left",
      "alignY": "bottom",
      "opacity": 100,
      "scale": 1,
      "renderOrder": 20,
      "customAnimation": [
        {
          "time": 50,
          "x": 0,
          "y": 0,
          "scale": 1,
          "opacity": 100,
          "easing": "EASE_OUT_SINE"
        },
        {
          "time": 100,
          "x": 0,
          "y": 0,
          "scale": 1,
          "opacity": 100,
          "easing": "EASE_OUT_SINE"
        }
      ]
    },
    "item": {
      "type": "item",
      "value": "apple",
      "scale": 1,
      "x": 0,
      "y": 0,
      "alignX": "left",
      "alignY": "bottom",
      "opacity": 100,
      "renderOrder": 20,
      "customAnimation": [
        {
          "time": 50,
          "x": 0,
          "y": 0,
          "scale": 1,
          "opacity": 100,
          "easing": "EASE_OUT_SINE"
        },
        {
          "time": 50,
          "x": 0,
          "y": 0,
          "scale": 1,
          "opacity": 100,
          "easing": "EASE_OUT_SINE"
        }
      ]
    }
  }
}
```

在上面的案例中包含了3种立绘里包含的所有的参数，接下来我们来一一介绍一下这些参数：

首先 `pic`、`player`、`item` 都是唯一的标识符，这些标识符只能出现一次，但是取名可以随便取，将在对话框文本中调用。
每个立绘里都有一个 type 表示当前立绘的类型，是必须要填的，不然模组将无法识别你这块立绘表述的内容

### 共通参数

- `x`（可选）：
  默认为 `0`  
  距离左边框的水平位置，根据用户mc屏幕宽度的百分比
- `y`（可选）：
  默认为 `0`  
  距离上边框的垂直位置，根据用户mc屏幕高度的百分比
- `alignX`（可选）：
  默认 `LEFT`  
  水平对齐，可选参数有 `LEFT`（左）、`CENTER`（中）、`RIGHT`（右）
- `alignY`（可选）：
  默认 `TOP`  
  垂直对齐，可选参数有 `TOP`（上）、`CENTER`（中）、`BOTTOM`（下）
- `opacity`（可选）：
  默认 `100`  
  透明度，范围 `0-100`
- `scale`（可选）：
  默认 `1`  
  缩放比例
- `renderOrder`（可选）：
  默认 `20`  
  渲染顺序的权重
- `customAnimation`（可选）：
  自定义动画，texture 设置 `animation` 为 `CUSTOM` 才能触发这里的动画。  
  这里的自定义是采用动画帧的配置方式。  
  外侧的配置是0帧的默认值，内侧的配置是一个数组，每一项都包括这段动画执行的时间 time ，第 time 帧时的材质 texture ，位置 x、y，缩放大小 scale ，透明度 opacity 以及这段动画采用的缓动函数 easing ，这些参数都是要必须填的。  
  动画执行的顺序是从数组的第一项到最后一项。
- `loop`（可选）：
  默认值 `false`  
  是否循环动画

### texture

- type（必填，必须填为`TEXTURE`）：类型
- value（必填）：立绘图片的资源包路径。
- animation（可选，默认无动画）：预设动画，可选参数: `NONE`无动画,`FADE_IN`渐入效果,`SLIDE_IN_FROM_BOTTOM`从底部滑入,`BOUNCE`弹射，`CUSTOM`自定义动画。
- duration（可选，默认20）：动画执行的时间，单位和用户电脑的帧率有关，具体时长为`duration/帧率`秒
- easing（可选，默认EASE\_IN\_SINE）：缓动函数，可选参数有`EASE_IN_SINE`,`EASE_OUT_SINE`,`EASE_IN_OUT_SINE`,`EASE_IN_QUAD`,`EASE_OUT_QUAD`,`EASE_IN_OUT_QUAD`,`EASE_IN_CUBIC`,`EASE_OUT_CUBIC`,`EASE_IN_OUT_CUBIC`,`EASE_IN_QUART`,`EASE_OUT_QUART`,`EASE_IN_OUT_QUART`,`EASE_IN_QUINT`,`EASE_OUT_QUINT`,`EASE_IN_OUT_QUINT`,`EASE_IN_EXPO`,`EASE_OUT_EXPO`,`EASE_IN_OUT_EXPO`,`EASE_IN_CIRC`,`EASE_OUT_CIRC`,`EASE_IN_OUT_CIRC`,`EASE_IN_BACK`,`EASE_OUT_BACK`,`EASE_IN_OUT_BACK`,`EASE_IN_ELASTIC`,`EASE_OUT_ELASTIC`,`EASE_IN_OUT_ELASTIC`,`EASE_IN_BOUNCE`,`EASE_OUT_BOUNCE`,`EASE_IN_OUT_BOUNCE`。具体每个参数代表的意义可以参考[缓动函数网站](https://easings.net/zh-cn)。
- width（可选，默认10）：宽度，根据用户mc屏幕宽度的百分比，范围为`>0`

- height（可选，默认10）：高度，根据用户mc屏幕的高度的百分比，范围为`>0`

  **player\_head**

- type（必填，必须填为`PLAYER_HEAD`）：类型

- value（必填）：玩家的名称或者UUID，必须得是正版玩家，我这里的@s表示的是当前打开对话框的玩家id

- x（可选，默认为0）：距离左边框的水平位置，根据用户mc屏幕宽度的百分比

- y（可选，默认为0）：距离上边框的垂直位置，根据用户mc屏幕高度的百分比

- width（可选，默认10）：宽度，根据用户mc屏幕宽度的百分比，范围为`>0`

- height（可选，默认10）：高度，根据用户mc屏幕的高度的百分比，范围为`>0`

**PS：因为玩家头像渲染的宽和高是必须一致的，所以实际这里的设置的width和height是共同计算后得到头像的边长的，边长=width​\*屏幕的宽+height\*屏幕的高。所以一般情况下，你只需要在width和height中选其中一个即可。**

**item**

- type（必填，必须填为`item`）：类型

- value（必填）：物品id

## 选项

```json
{
  "option":{
    "texture": "chatbox:textures/options/default_no_checked_option.png",
    "selectTexture": "chatbox:textures/options/default_checked_option.png",
    "lockTexture": "chatbox:textures/options/default_lock_checked_option.png",
    "optionChatX": 0,
    "optionChatY": 0,
    "textAlign": "left",
    "x": 0,
    "y": 0,
    "width": 10,
    "height": 10,
    "alignX": "left",
    "alignY": "bottom",
    "opacity": 100,
    "renderOrder": 10
  }
}
```

- texture（建议填）：选项默认贴图，

- selectTexture（建议填）：鼠标悬浮时的贴图

- lockTexture（建议填）：选项上锁时的贴图

- optionChatX（可选，默认0）：选项文本水平偏移

- optionChatY（可选，默认0）：选项文本垂直偏移

- textAlign（可选，默认左对齐）：文本对齐，可选参数：`LEFT`,`CENTER`,`RIGHT`

- x（可选，默认为0）：贴图距离左边框的水平位置，根据用户mc屏幕宽度的百分比

- y（可选，默认为0）：第一个选项贴图距离上边框的垂直位置，其它贴图位置会自动根据高度自动生成，根据用户mc屏幕高度的百分比

- width（可选，默认10）：贴图宽度，根据用户mc屏幕宽度的百分比，范围为`>0`

- height（可选，默认10）：贴图高度，根据用户mc屏幕的高度的百分比，范围为`>0`

- alignX（可选，默认左对齐）：水平对齐，可选参数有`LEFT`,`CENTER`,`RIGHT`

- alignY（可选，默认上对齐）：垂直对齐，可选参数有`TOP`,`CENTER`,`BOTTOM`

- opacity（可选，默认100）：贴图透明度，范围`0-100`

- renderOrder（可选，默认10）：渲染顺序的权重